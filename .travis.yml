language: python

env:
  global:
    secure: koXvSkA3uDtuM7JGiz5vXvnYsn5VAXJN+srygs/j0yTqg7Dc6dwq0pXeOwB6cnw4PtOypzJJ7i2W51r50wX7vuptNRXIWOM1Zef+2paspdP9X64NtmeroAUUh3X7x6lf2+AGXJaKnE6uddS1uRBP62ukGfvjFUT0zVCgwaskXD0OcCXJL5jyHOXFKopmjpnxtGn++wKVOf+R/w/HRpzTabtwxbvwRBNLgtUPi6WfODiIsPABesR7icNJ/DmVu62RqwJuSPCjgjS2ru41Ts+hbKSE364ECNwh7J8Ca3TasG3obOWH7og4qbbwM9/m0c0elfZgy1Uw7ErjRL5drxZ4S4wngf2kNP2q410ritePBIjP/2JvjrhzKIfbj8/b16TG4QDZOCcG7h/fJyyl+YPnzrAEI8jluECuwN+smLgdV6IaqBavGpSsA3sw/fywPfbUUBYYMXAObYWp5GZ9mxqgFVekUQpao5JxkMEyyDS3cb2GPOaRNs5vs1/Qg4b1mj2gSc/i5VbSRrjNtf1jCk/jmdLv38+pq2Kw7lyDD4xthGbFKYJGwkMipVddMowORoUGyw42xBsvhFW0mYIfWIE4/Hv+7bx60C3GfcehuQkbyrrVvKDDf44Xtsceipmg0ShJhTuoqo9xEBzfmrDtbV1PxLDleQoHNvV2LNS0jBIZA0I=
    secure: mRjYnoMKSiTqM7LlR35E7XlXNl0i9sEaKnh7SEvRf+wWWZIMQOuq5eITQotRfRib+rdEjc7ViRfwtT80M2J2C72PaADSnRmc4vFn0d/woyteI7sGU/PRNx45t5ZETnvvbs9Jg7RhztiX/SkqUXnj1PY0PlaUR3KVDuoESfwP+p843ZgVJfY4NKXvrI5MY2uEHOhqHqxOFfzAqgxjkVvrzVC3VcM7Ztar0q1NxFLSXvWE5QIcrWc8vKT8n9+P8L/atprRrisdZp7nFVYol+0donlPYGMcnGGNL7t+9uUQuNGdVPbiP67CdVYCzHQ6R7ARVd1gQRk7KGvsA9eu4lK/9fc1w3l8iEST2DyEYX2qr1UX8d7LKYFDSFV6ZhWMgxnzgMJDbsWRI9MH15IVs/xOwZ5V82rxJuEDfowqET5uAa5rr88lUkmpS07epM3+txe1uYYiNvdFPWx5fR7S7QeDv0SB/Uv8vuG8LgJMPry3hZQBQhFJnnBs+jLXvaQfbnEqQo9oVqaelf38xoZqkQY2S1/ryvhP73+VebzQeTGbEqBWddrLRHaPrDwJe6OAR5xYflYNSzC+h45IFQGfemUwUgwPBE8CJy1F99/WGBuzcRH9HTKI9Ikxy1kzaR6oQ1y6UjbvuKjSUSQ9s5g4kTNvMEydWDgPh7aRZmabTIZHA24=

install:
- cd mysite
- pip install -r requirements.txt
before_script:
- python manage.py migrate
script:
- black --check .
- flake8 .
- coverage run --source=mysite,polls manage.py test
- coverage report
after_script:
- coveralls
deploy:
  provider: elasticbeanstalk
  access_key_id:
    secure: koXvSkA3uDtuM7JGiz5vXvnYsn5VAXJN+srygs/j0yTqg7Dc6dwq0pXeOwB6cnw4PtOypzJJ7i2W51r50wX7vuptNRXIWOM1Zef+2paspdP9X64NtmeroAUUh3X7x6lf2+AGXJaKnE6uddS1uRBP62ukGfvjFUT0zVCgwaskXD0OcCXJL5jyHOXFKopmjpnxtGn++wKVOf+R/w/HRpzTabtwxbvwRBNLgtUPi6WfODiIsPABesR7icNJ/DmVu62RqwJuSPCjgjS2ru41Ts+hbKSE364ECNwh7J8Ca3TasG3obOWH7og4qbbwM9/m0c0elfZgy1Uw7ErjRL5drxZ4S4wngf2kNP2q410ritePBIjP/2JvjrhzKIfbj8/b16TG4QDZOCcG7h/fJyyl+YPnzrAEI8jluECuwN+smLgdV6IaqBavGpSsA3sw/fywPfbUUBYYMXAObYWp5GZ9mxqgFVekUQpao5JxkMEyyDS3cb2GPOaRNs5vs1/Qg4b1mj2gSc/i5VbSRrjNtf1jCk/jmdLv38+pq2Kw7lyDD4xthGbFKYJGwkMipVddMowORoUGyw42xBsvhFW0mYIfWIE4/Hv+7bx60C3GfcehuQkbyrrVvKDDf44Xtsceipmg0ShJhTuoqo9xEBzfmrDtbV1PxLDleQoHNvV2LNS0jBIZA0I=
  secret_access_key:
    secure: mRjYnoMKSiTqM7LlR35E7XlXNl0i9sEaKnh7SEvRf+wWWZIMQOuq5eITQotRfRib+rdEjc7ViRfwtT80M2J2C72PaADSnRmc4vFn0d/woyteI7sGU/PRNx45t5ZETnvvbs9Jg7RhztiX/SkqUXnj1PY0PlaUR3KVDuoESfwP+p843ZgVJfY4NKXvrI5MY2uEHOhqHqxOFfzAqgxjkVvrzVC3VcM7Ztar0q1NxFLSXvWE5QIcrWc8vKT8n9+P8L/atprRrisdZp7nFVYol+0donlPYGMcnGGNL7t+9uUQuNGdVPbiP67CdVYCzHQ6R7ARVd1gQRk7KGvsA9eu4lK/9fc1w3l8iEST2DyEYX2qr1UX8d7LKYFDSFV6ZhWMgxnzgMJDbsWRI9MH15IVs/xOwZ5V82rxJuEDfowqET5uAa5rr88lUkmpS07epM3+txe1uYYiNvdFPWx5fR7S7QeDv0SB/Uv8vuG8LgJMPry3hZQBQhFJnnBs+jLXvaQfbnEqQo9oVqaelf38xoZqkQY2S1/ryvhP73+VebzQeTGbEqBWddrLRHaPrDwJe6OAR5xYflYNSzC+h45IFQGfemUwUgwPBE8CJy1F99/WGBuzcRH9HTKI9Ikxy1kzaR6oQ1y6UjbvuKjSUSQ9s5g4kTNvMEydWDgPh7aRZmabTIZHA24=
  region: us-east-1
  app: mysite
  env: django-env
  bucket_name: elasticbeanstalk-us-east-1-891377044770
